---
layout: post
title: "오브젝트 - 책임 할당하기"
author: "dongpark"
category: study
---
##### 데이터 중심 설계의 문제점
협력이라는 문맥에 벗어나 캡슐화를 위반하기 쉽고, 요소들 사이에 결합도가 올라가고, 코드 수정이 어려워진다. **책임을 우선적으로 할당하는게 좋다.**

##### 책임주도 설계를 향해
- 데이터보다 행동을 먼저 결정한다 -> 데이터 처리의 오퍼레이션보다 역할이 책임으로부터 생성되도록
- 협력이라는 문맥 안에서 책임을 결정하라 -> 객체가 메시지를 선택하는것이 아니라 메시지가 객체를 정하는 것이다.

*클래스 기반 설계에서 메시지 기반 설계로의 전환은 우리가 해왔던 사고를 전환하는것이다. 이 클래스는 무엇을  해야하지? 라는 질문에서 메시지를 전송(협력) 해야 하는데 누구에게 보내지? 라고 사고하는것이 핵심인것 같다.*

##### 책임할당을 쉽게하기 위한 GRASP패턴 
*일반적인 책임할당을 위한 소프트웨어 패턴* 

- 도메인 개념에서 출발하기 -> 설계를 시작하기 전에 대략적인 도메인 모델을 구성핸보는게 좋다. 그렇다고 너무 많은 시간을 쏟아 내는거솓 권장하지는 않는다.
**올바른 도메인 모델은 절대적으로 존재하지 않기 때문이다.**

- Infomation expert 정보전문가 패턴
ex_ 영화예매의 예로는 메시지를 수신할 적합한 객체는 누구인가? 책임을 수행하기에 적절한 정보를 가진 객체를 찾는것과 같은 예이다
- low coupling 낮은 결합도 패턴
목록에 이미 속성으로 있거나 결합요소를 줄여나간다. 혹은 이미 결합도가 있는 객체끼리 결합한다.
- high cohesion 패턴
결합을 하거나 메시지를 수신할때 책임을 떠맞는지 확인하는 패턴

##### 참조자에게 객체 생성을 할당하는 책임을 주어라
- creator 패턴 (A를 생성한다는 전제)
    -  B가 A객체를 포함하거나 참조한다
    - B가 A객체를 기록한다.
    - B가 A객체를 긴밀하게 사용한다
    - B가 A객체를 초기화 하는데 필요한 데이터를 가지고 있다.

##### 변경에 취약한 코드
- 코드를 수정해야 하는 이유를 하나 이상 가지는 클래스이다.
    -> 응집도가 낮다
- 변경에 취약한 클래스를 찾아내는것은 생각보다 간단하다
    1. 인스터스 변수가 초기화 되는 시점을 살핀다 -> 인스턴스가 한번에 초기화 되는지 살핀다
    2. 메서드들이 인스터늣 변수를 사용하는 방식 -> 각 메서드들이 사용하는 인스턴스가 포함관계인지 살핀다.
**각 클래스에 응집도를 높이다보면 결합도가 강력해지는 경우도 왕왕 있다.**

##### 다형성을 이용해 분리하기
- procted variation 패턴
구현의 공유를 이용하기 위해선 인터페이스를 사용한다.
각기 다른 할인방법이 있다면 할인값을 받는 개념자체만 공유하고 다형성의 마법에 맡긴다. 이것이 곧 캡슐화고 수정으로부터의 파급효과를 제어한다.

##### 변경과 유연성
새로운 타입의 정책이 추가될수 있는 인스턴스는 상속으로 의존성관리하기에 적절하지 않다.
이러한 경우엔 합성을 사용하라





