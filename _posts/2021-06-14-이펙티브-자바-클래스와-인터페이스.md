---
layout: post
category: tech
---

### 클래스와 멤버의 접근 권한을 최소화하라, 접근자 메서드를 사용하라

캡슐화의 기본원칙인 클래스와 멤버의 접근을 가능한 좁혀야한다. 따라서 정보 은닉의 법칙을 따르는게 좋다. 또한 접근권한을 두면서 모듈화가 일어남에 따라 아래와 같은 장점이 생긴다.
- 개발속도
- 성능최적화 용이
- 관리비용의 감소
- 재사용성 증가
- 개발 난이도 하락

자바에서 제공하는 접근자는 총 4가지 성격으로 볼 수 있다. 
- public : 모든 접근을 허용함
- protected : 하위 클래스를 포함한 패키지 내의 접근을 허용함
- package private : 패키지 안에 모든 클래스를 허용함
- private : 톱레벨 클래스에서의 접근을 허용함

`public`,`procted` 는 모듈로 제공시 사용자 차원에서 접근 가능한 인자가 되어버린다. 좋은 사용성을 제공하기 위해서는 서비스 되는한 영원히 지원 되야하는 클래스의 필드가 되어야 한다.
반대로 `package private` 와 `priavte` 레벨에서는 접근이 힘들기 때문에 클래스가 추구하는 추상성만 지킨다면 얼마든지 변경이 가능하다.
또한 모듈로 제공시 클래스의 불변성을 고려해야 하기 때문에라도 인자들은 `private` 속성으로 제공되는게 맞다.
하지만 마냥 좋은것은 아니고 `상위 클래스의 메서드를 하위클래스로 재정의 할때 접근범위가 좁으면 안된다` 는 `리스포크의 치환 법칙` 에 의해 상위 클래스는 무조건 `public` 으로 정의해야 하는점도 맞다

위에서 말하는 불변성의 보장을 지키면 아래와 같은 이점을 본다
- 불변성 보장 O
- 스레드 안전 O

단 추상개념을 완성하는 필드(대게 불변성을 가진 필드들, 키값, 파이값과 같은 값들) `private static final`로 공개해도 좋다. 단 배열은 예외다(배열 생서자의 유동적인 배열 크기에 의해)  

`프로그램 요소의 접근성은 가능한 한 최소한으로 하라. 꼭 필요한 것만 골라 최소한의 public API를 설계하자.
그 외에는 클래스 인터페이스, 멤버가 의도치 않게 API로 공개되는 일이 없도록 해야 한다. 
public 클래스는 상수용 public s tatic final 필드 외에는 어떠한 public 필드도 가져서는 안 된다. 
public static 필드가 참조하는 객체가 불변인지 확인하라`

### 변경 가능성을 최소화하라

변경 가능성을 최소화 하면 아래와 같은 불변의 규칙중 하나이다
- 객체의 상태를 변경하는 메서드를 제공하지 않는다.
- 모든 필드를 final,private 로 선언한다
- 자신외에 가변 컴포넌트에 접근하지 못하도록 한다.

위와 같은 규칙중 하나를 따른다면 스레드로부터 안전하고 자유롭게 공유가 가능해 객체를 만들때 용이하게 참조할 수 있다.
그리고 그 자체로 원자성을 가질수 있어 오류에서 벗어날 수 있다.
값이 다르다면 독립된 객체로 만드는것도 잊지 말아야 한다.

그러고 클래슨느 꼭 필요한 경우가 아니라면 필드를 final 로 두는것이 좋다. 생성자는 불변식 설정이 완료되어 초기화가 완전히 끝난 상태로 객체를 생성시키거나.
정적 팩토리 형태로 객체를 제공하는것도 하나의 방법이다.

### 상속보다는 컴포지션을 사용하라 

메서드 호출과 달리 상속은 캡슐화 법칙을 깨드리기 때문에, 상속계획이 있는것이 아니였다면..
포함관계로 개선하거나 변경하고자 하는 클래스를 필드로 선언해 해당 기능들을 정의해 사용하는것이 좋다.

안좋은예 `Stack class`, `Properties class`
### 상속을 고려해 설계하고 문서화하라. 그러지 않았다면 상속을 금지하라

### 추상 클래스보다는 인터페이스를 우선하라

### 인터페이스는 구현하는 쪽을 생각해 설계하라 

### 인터페이스는 타입을 정의하는 용도로만 사용하라

### 태그 달린 클래스보다는 클래스 계층구조를 활용하라

### 멤버 클래스는 되도록 static 으로 만들어라

### 톱레벨 클래스는 한 파일에 하나만 담으라
