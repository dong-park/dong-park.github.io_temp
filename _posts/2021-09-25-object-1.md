---
layout: post
title: "오브젝트 - 역할, 책임, 협력"
author: "dongpark"
category: [post, main]
---

#### *협력*
###### 협력이란?
어떤 객체가 다른 객체에게 무엇인가를 요청하는 것이다. 한 객체는 어던 것이 필요할 때 다른 객체에게 전적으로 위임하거나 서로 협력한다. 즉, 두 객체가 상호작용을 통해 더 큰 책임을 수행하는 것이다. 객체 사이의 협력을 설계할 때는 객체를 서로 분리된 인스턴스가 아닌 협력하는 파트너로 인식해야 한다.

다른 객체에게 무엇인가를 요청하는 것을 **메시지 전송**이라 한다.
메시지를 수신받은 객체는 메서드를 실행한다.

다른 객체는 처리를 위임받기 위해 객체를 자율적으로 만들어야 하고, 객체를 자율적으로 만들기 위해서는 일단 내부 구현을 **캡슐화** 하는게 좋다.

자신이 책임을 수행하던 도중 필요한 정보를 알지 못하거나 외부의 도움이 필요한 경우 적절한 객체에게 협력을 요청해야 하는것이다.

##### 협력이 설계를 위한 문맥을 결정한다
객체가 참여하는 협력이 객체를 구성하는 행동과 상태 모두를 결정한다. 따라서 협력은 객체를 설계하는 데 필요한 일종의 **문맥**을 제공한다.

#### *책임*
###### 책임이란 무엇인가?
협력에 필요한 객체들이 수반하는 행동을 책임이라고 한다.

그럼 과연 책임의 범위를 어디까지 둘 것인가? 하는 것과 아는 것의 기준으로 분리한다.
* **하는것**
    * 객체를 생성하거나 계산을 수행하는 등 스스로 하는것
    * 다른 객체의 행동을 시작 시키는것
    * 다른 객체의 활동을 제어하고 조절하는 것
    
* **아는것**
    * 사적인 정보에 관해 아는지?
    * 관련된 객체에 관해 아는지?
    * 자신이 유도하거나 계싼 할 수 있는 것에 관해 아는지?

책임은 객체 지향 설계의 핵심이다. 가장 중요한 능력도 곧 책임을 능숙하게 소프트웨어 객체에 할당하는 것이다.

##### 책임할당
자율적인 객체를 만드는 가장 기본적인 방법은 책임을 수행하는데 적절한 전문가 객체에게 그 책임을 할당하는 것이다. 이를 information expert(정보 전문가) 패턴이라고 한다.

##### 책임 주도 설계
책임을 찾고 책임을 수행할 적절한 객체를 찾아 책임을 할당하는 방식으로 협력을 설계하는 방법을 책임 주도 설계 라고 부른다,

###### 책임주도 설계의 과정
1. 시스템이 사용자에게 제공해야 하는 기능인 시스템 책임을 파악한다.
2. 시스템 책임을 더 작은 책임으로 분할한다.
3. 분할된 책임을 수행할 수 있는 적절한 객체 또는 역할을 찾아 책임을 할당한다.
4. 객체가 책임을 수행하는 도중 다른 객체의 도움이 필요한 경우 이를 책임질 적절한 객체 또는 역할을 찾는다.
5. 해당 객체 또는 역할에게 책임을 할당함으로써 두 객체가 협력하게 한다.

##### 메시지가 객체를 결정하는것이 좋다
책임을 할당하기 위한 메시지를 먼저 식별하고 객체를 나중에 선택하는것이 중요하다.

###### 장점
1. 최소한의 인터페이스를 만들수 있다.
2. 충분한 추상화가 가능해진다.

###### 예시
영화시스템을 구성중
- 예매하라 ->  screnning 객체가 선택되었다.
- 가격을 계산하라-> screnning이 전송 movie 객체가 수신한다.

##### 행동이 상태를 결정한다
객체의 존재이유는 협력에 참여하기 위함이다. 곧 행동을 제공한다.
*하지만 초보자들은 객체의 상태변화에 초점을 맞춘다. 내부구현이 퍼블릭 인터페이스에 노출이 되기 마련이다.*

#### *역할*
##### 역할이란?
객체가 어떤 특정한 협력 안에서 객체가 맡게되는 책임의 집합이다.
객체를 모델링 하는게 아닌 역할을 배분받는 객체를 정하는것이다.

* (역할1) -> 예매하라 -> (역할2) -> 할인 요금을 계산하라 -> 책임역할
* screnning -> 예매하라 -> movie -> 할인요금을 계산하라 -> discount policy

역할이 중요한 이유는 유연하고 재사용 가능한 협력을 얻기 위함이다.

##### 유연하고 재사용 가능한 협력의 예
위에서 말한 discount policy는 협력이 가능한 개별적인 객체들이 존재한다. 일일이 구현을 한다면 대부분의 코드는 중복될 것이다.

문제를 해결하기 위해서는 객체가 아닌 책임에 초점을 맞춰야 한다.
역할을 다른것으로 교체할 수 있는 책임의 집합으로 접근하면 좋다.
-> 할인 요금을 계산하는 동일한 책임을 가지는 추상적 discount policy 책임역할을 두면 좋다.

이 객체가 무슨 역할을 할지, 역할이 1개라면 객체가 될 수 있지만., 여러 종류의 객체가 될 수 있다면 그 객체는 역할이다.

그리고 이러한 코드는 **추상화** 되어 구성된다.

추상화의 장점은 세부사항에 억눌리지 않고 상위수준의 정책에 강조될수 있다.
양이 많다면? 객관적으로 이해하기 힘들것이다.

협력에 참여 하려는 할인정책의 모든 종류에 대해서 알지 않아도 된다. 객체에서 가장 중요 포인트는 행동이기 때문이다.협력이라는 문맥 안에서 역할을 특정한 협력에 참여해서 책임을 수행하는 객체의 일부이자 페르소나이다.

이것은 협력관점에서 동일한 책임을 지니는 객체들에게 서로에 대해서 대체가 가능하는 뜻과도 같다.
